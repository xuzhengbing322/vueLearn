# 跨域

### 1.1、什么是跨域

​	客户端和服务器都有自己的url地址。url地址包括<协议>：//<主机域名>：<端口号>/<路径>。例如：http://localhost:8080/home。如果客户端和服务器的url的协议、域名和端口号相同，则浏览器和客户端同源，浏览器允许两者直接通信。但如果两者的url的协议、域名和端口号有一个不同，则两者不同源，浏览器会阻止两者直接相互通信。同源策略的目的是为了保证信息的安全。可有时候，我们想让非同源的客户端和服务器相互通信，就需要跨域。

​	项目开发中常使用Proxy中间件代理来实现跨域。客户端发送数据请求时，Proxy拦截请求，判断请求地址是否有特定的地址片段。如果存在特定的地址片段，则对这次数据请求进行代理，将数据请求按照配置信息转发给服务器。服务器收到数据请求后，将请求结果返回到proxy。proxy收到服务器返回的数据后，再把请求结果返回给客户端。本质上是在本地起了一个node服务去做请求的转发代理。

```javascript
//vue.config.js
devServer: {
    proxy: {
      // 请求地址如果包含/api，就代理这次请求
      "/api": {
        // 目标地址
        target: "http://v.juhe.cn",
        // 换一个源
        changeOrigin: true,
        ws: true,
        secure: false,
        // 请求路径重写。请求时在本地地址后面加上/api/xxx，
        pathRewrite: {
          "^/api": ""
        },
      }
    }
}
```

# vue-router

