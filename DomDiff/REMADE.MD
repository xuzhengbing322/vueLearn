### DOM Diff
DOM Diff 实际就是对比两个虚拟节点，然后找出它们的差异，然后对应到真实DOM上面去打补丁的过程。我们目的就是要找到这些差异，以最小的代价去操作DOM。因为操作DOM会损害性能。

虚拟节点可以理解为普通的对象。它就是把真实的节点用对象的方式模拟出来。我们做新旧虚拟节点的对比是为了，当它们有差异的时候，我们就要查到这个差异，然后形成一个补丁，然后再让它跟真实DOM去进行匹配。然后把补丁打到真实DOM上面去。其实最终那一步还是要操作DOM，但是呢是以差异化最小的代价操作DOM。

我们基本上有两种方法，template最终都会在vue中形成虚拟节点。等到我更改了template中的数据后，就有形成了一个新的虚拟节点。

DOM diff 只会平级对比。每个节点都有自己的索引，它也是按照索引进行对比。新旧两个节点内容相同，但是位置不同，可以进行替换。DOM diff是深度遍历。



这是我对照源码自己理解的思路，希望能帮助大家[星星眼]
1.(dom元素信息对象传入)
  首先通过函数创建的形式将dom元素相关信息以对象和数组的形式传入，
如果有子节点则再调用创建的函数放置到第三个参数 
2.(构成虚拟节点)
  通过类的实例化将传入的dom元素信息对象化，此时就构成了虚拟节点
3.(转换为真实dom)
  接下来通过函数判断传入的第二个参数的类型是style、class、value，或者是data-
等等。
  如果是value则要判断标签是否为input或textarea,如果是则通过.value设置，不是则通过setAttribute进行设置，如果是style则通过.style.cssText进行设置，其他剩下的也都已setAttrbute进行设置
  处理完标签参数后 循环第三个参数children，判断是否为类构建，如果是则进行递归处理，不是则证明只是普通文本，通过createTextNode进行创建即可
此时只需要将处理好的dom节点挂载在指定dom节点上即可完成虚拟dom转换真实dom然后渲染节点
4.(虚拟节点差异分析创建补丁包)
  差异比较时会深度比较而不是广度比较，有标签的删除 替换 修改 新增、以及标签参数变更的操作，其中特殊的两个就是
替换不需要删除而是直接替换发生索引移步，新增会出现索引增加等情况。在比较差异的时候就会创建对象形式的补丁包，其中记录了操作类型，具体操作值与索引，这就是diff算法，具体操作流程如下
 首先将新的虚拟dom和旧的虚拟dom传入，
如果不存在newdom则创建删除补丁，
如果new/old dom类型都为字符串且文本不相同则创建文本变更补丁,
如果new/olddom的标签相同且通过循环判断出标签中的参数有增加或修改则创建参数变更的补丁
其余则都为替换补丁，新增补丁过于复杂就不说了
其中在发生标签相同的情况下还要将子节点传入这个函数递归进行处理
完成后就创建好了差异补丁包